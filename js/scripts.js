var eventGallery=function(){"use strict";function a(a){a.stopPropagation(),a.preventDefault(),"dragover"==a.type?t.classList.add("hover"):t.classList.remove("hover")}function b(a,b){window.matchMedia("(max-width: 768px)").matches&&(b?a.classList.add("upload-mobile"):a.classList.remove("upload-mobile"))}function c(){m.value=""}function d(){var a=n.querySelectorAll('.image-container input[type="file"]');a.forEach(function(a,b){a.setAttribute("name","eventGalleryImage_"+(b+1))})}function e(){var a=r.querySelector(".header i.upload-error-close");a&&a.addEventListener("click",function(){r.className="hide"},!1)}function f(){var a=document.createElement("SECTION");a.setAttribute("id","error-upload"),a.setAttribute("class","hide"),a.innerHTML='<div class="error-upload-container"><div class="header"><span><i class="camera">&#128247</i>Bad picture size</span><i class="upload-error-close"></i></div><section class="error-container"><p>The following images do not match the size of the image. Images should have a minimum of 300×300 pixels, maximum 1920×1920 pixels!</p><div class="error-content"></div>',document.body.insertBefore(a,document.body.firstChild)}function g(){var a=n.querySelectorAll('.image-container input[type="file"]').length,b=q.querySelector("span");b&&(b.innerHTML=14-a),a>=14?(m.disabled=!0,q.innerHTML="Can not upload more images!",p.classList.add("disabled")):(m.disabled=!1,p.classList.remove("disabled"),q.innerHTML="Upload <span>"+(14-a)+"</span> more pictures.")}function h(a){var c=n.querySelectorAll(".image-container:nth-child(1n+"+(a+1)+") i.image-remove");c.forEach(function(a,c){a.addEventListener("click",function(){var a=this,c=a.closest(".image-container");if(c){o.removeChild(c);var e=document.createElement("DIV");e.setAttribute("class","image-container"),o.insertBefore(e,o.lastChild),d(),g(),0==n.querySelectorAll(".image-container i.image-remove").length&&(u.forEach(function(a,b){a.classList.add("in-active")}),t.classList.add("active"),setTimeout(function(){t.classList.add("opacity-show")},50),b(n,!1),window.addEventListener("resize",function(){b(n,!1)},!1))}},!1)})}function i(a){return new Promise(function(b,c){if(0==a.type.indexOf("image")){var d=new FileReader;d.addEventListener("load",function(c){var d=new Image;d.src=c.target.result,d.addEventListener("load",function(){var c=d.naturalWidth,e=d.naturalHeight;b(1920>=c&&c>=300&&1920>=e&&e>=300?{success:!0,name:a.name}:{success:!1,name:a.name})},!1)},!1),d.readAsDataURL(a)}})}function j(a,c){if(0==a.type.indexOf("image")){var d=new FileReader;d.addEventListener("load",function(d){var e=new Image;e.src=d.target.result,e.addEventListener("load",function(){var f=e.naturalWidth,h=e.naturalHeight;if(14>c)if(1920>=f&&f>=300&&1920>=h&&h>=300){var i=document.createElement("DIV");i.setAttribute("class","image-container loading"),i.innerHTML='<i class="image-remove"></i><img src="'+d.target.result+'" alt="" />';var j=o.querySelectorAll(".image-container img").length;o.insertBefore(i,o.children[j]);var k=document.createElement("INPUT");k.type="file",k.files=new FileList(a),i.insertBefore(k,i.firstChild),o.removeChild(o.lastElementChild),g(),u.forEach(function(a,b){a.classList.remove("in-active")}),t.classList.remove("opacity-show"),setTimeout(function(){t.classList.remove("active")},350),b(n,!0),window.addEventListener("resize",function(){b(n,!0)},!1)}else{var l=document.createElement("SPAN");l.setAttribute("class","error-img"),l.innerHTML=a.name+" ("+f+"×"+h+')<span class="comma">,</span>',s&&s.insertBefore(l,s.firstChild)}})},!1),d.readAsDataURL(a)}}function k(b){var e=!1,f=o.querySelectorAll(".image-container img").length;s&&(s.innerHTML=""),r.className="hide",a(b);for(var g=[],k=b.target.files||b.dataTransfer.files,l=(k.length,0);l<k.length;l++)j(k[l],f),g.push(i(k[l]));c(),14>f&&Promise.all(g).then(function(a){for(var b=0;b<a.length;b++)a[b].success||(e=!0),b==a.length-1&&(setTimeout(function(){h(f),d()},100),e&&setTimeout(function(){r.className="show"},100))})}function l(){window.File&&window.FileList&&window.FileReader&&(m.addEventListener("change",k,!1),n.addEventListener("dragover",a,!1),n.addEventListener("dragleave",a,!1),n.addEventListener("drop",k,!1)),e()}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(a){var b=this;if(!document.documentElement.contains(b))return null;do{if(b.matches(a))return b;b=b.parentElement||b.parentNode}while(null!==b&&1===b.nodeType);return null}),f();var m=document.getElementById("file-input"),n=document.getElementById("drag-and-drop-upload"),o=n.querySelector(".drag-container"),p=document.getElementById("gallery-upload-button"),q=document.getElementById("amount-container"),r=document.getElementById("error-upload"),s=r.querySelector(".error-upload-container section.error-container .error-content"),t=document.getElementById("drag-and-drop-start"),u=document.querySelectorAll("section.image-gallery-upload .upload-amount");return{app:l}}();eventGallery.app();