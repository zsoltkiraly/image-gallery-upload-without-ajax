var eventGallery=function(){"use strict";function a(){if(window.console){const a={black:"%c     ",blue:"%c   ",author:"%c  Zsolt Király  ",github:"%c  https://zsoltkiraly.com/"},b={black:"background: #282c34",blue:"background: #61dafb",author:"background: black; color: white",github:""};console.log(a.black+a.blue+a.author+a.github,b.black,b.blue,b.author,b.github)}}function b(a){a.stopPropagation(),a.preventDefault(),"dragover"==a.type?u.classList.add("hover"):u.classList.remove("hover")}function c(a,b){window.matchMedia("(max-width: 768px)").matches&&(b?a.classList.add("upload-mobile"):a.classList.remove("upload-mobile"))}function d(){n.value=""}function e(){var a=o.querySelectorAll('.image-container input[type="file"]');a.forEach(function(a,b){a.setAttribute("name","eventGalleryImage_"+(b+1))})}function f(){var a=s.querySelector(".header i.upload-error-close");a&&a.addEventListener("click",function(){s.className="hide"},!1)}function g(){var a=document.createElement("SECTION");a.setAttribute("id","error-upload"),a.setAttribute("class","hide"),a.innerHTML='<div class="error-upload-container"><div class="header"><span><i class="camera">&#128247</i>Bad picture size</span><i class="upload-error-close"></i></div><section class="error-container"><p>The following images do not match the size of the image. Images should have a minimum of 300×300 pixels, maximum 1920×1920 pixels!</p><div class="error-content"></div>',document.body.insertBefore(a,document.body.firstChild)}function h(){var a=o.querySelectorAll('.image-container input[type="file"]').length,b=r.querySelector("span");b&&(b.innerHTML=14-a),a>=14?(n.disabled=!0,r.innerHTML="Can not upload more images!",q.classList.add("disabled")):(n.disabled=!1,q.classList.remove("disabled"),r.innerHTML="Upload <span>"+(14-a)+"</span> more pictures.")}function i(a){var b=o.querySelectorAll(".image-container:nth-child(1n+"+(a+1)+") i.image-remove");b.forEach(function(a,b){a.addEventListener("click",function(){var a=this,b=a.closest(".image-container");if(b){p.removeChild(b);var d=document.createElement("DIV");d.setAttribute("class","image-container"),p.insertBefore(d,p.lastChild),e(),h(),0==o.querySelectorAll(".image-container i.image-remove").length&&(v.forEach(function(a,b){a.classList.add("in-active")}),u.classList.add("active"),setTimeout(function(){u.classList.add("opacity-show")},50),c(o,!1),window.addEventListener("resize",function(){c(o,!1)},!1))}},!1)})}function j(a){return new Promise(function(b,c){if(0==a.type.indexOf("image")){var d=new FileReader;d.addEventListener("load",function(c){var d=new Image;d.src=c.target.result,d.addEventListener("load",function(){var c=d.naturalWidth,e=d.naturalHeight;b(1920>=c&&c>=300&&1920>=e&&e>=300?{success:!0,name:a.name}:{success:!1,name:a.name})},!1)},!1),d.readAsDataURL(a)}})}function k(a,b){if(0==a.type.indexOf("image")){var d=new FileReader;d.addEventListener("load",function(d){var e=new Image;e.src=d.target.result,e.addEventListener("load",function(){var f=e.naturalWidth,g=e.naturalHeight;if(14>b)if(1920>=f&&f>=300&&1920>=g&&g>=300){var i=document.createElement("DIV");i.setAttribute("class","image-container loading"),i.innerHTML='<i class="image-remove"></i><img src="'+d.target.result+'" alt="" />';var j=p.querySelectorAll(".image-container img").length;p.insertBefore(i,p.children[j]);var k=document.createElement("INPUT");k.type="file",k.files=new FileList(a),i.insertBefore(k,i.firstChild),p.removeChild(p.lastElementChild),h(),v.forEach(function(a,b){a.classList.remove("in-active")}),u.classList.remove("opacity-show"),setTimeout(function(){u.classList.remove("active")},350),c(o,!0),window.addEventListener("resize",function(){c(o,!0)},!1)}else{var l=document.createElement("SPAN");l.setAttribute("class","error-img"),l.innerHTML=a.name+" ("+f+"×"+g+')<span class="comma">,</span>',t&&t.insertBefore(l,t.firstChild)}})},!1),d.readAsDataURL(a)}}function l(a){var c=!1,f=p.querySelectorAll(".image-container img").length;t&&(t.innerHTML=""),s.className="hide",b(a);for(var g=[],h=a.target.files||a.dataTransfer.files,l=(h.length,0);l<h.length;l++)k(h[l],f),g.push(j(h[l]));d(),14>f&&Promise.all(g).then(function(a){for(var b=0;b<a.length;b++)a[b].success||(c=!0),b==a.length-1&&(setTimeout(function(){i(f),e()},100),c&&setTimeout(function(){s.className="show"},100))})}function m(){window.File&&window.FileList&&window.FileReader&&(n.addEventListener("change",l,!1),o.addEventListener("dragover",b,!1),o.addEventListener("dragleave",b,!1),o.addEventListener("drop",l,!1)),f()}a(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(a){var b=this;if(!document.documentElement.contains(b))return null;do{if(b.matches(a))return b;b=b.parentElement||b.parentNode}while(null!==b&&1===b.nodeType);return null}),g();var n=document.getElementById("file-input"),o=document.getElementById("drag-and-drop-upload"),p=o.querySelector(".drag-container"),q=document.getElementById("gallery-upload-button"),r=document.getElementById("amount-container"),s=document.getElementById("error-upload"),t=s.querySelector(".error-upload-container section.error-container .error-content"),u=document.getElementById("drag-and-drop-start"),v=document.querySelectorAll("section.image-gallery-upload .upload-amount");return{app:m}}();eventGallery.app();